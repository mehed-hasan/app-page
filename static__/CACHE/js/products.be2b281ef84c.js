$(document).ready(function(e){var isProductTypeExist=is_product_type_exists;var filteredPublicCategoryIds=filtered_public_category_ids;var isSearchPage=is_search_page;var searchString=search_string;var loadBtnHtml=$("#productListLoadMoreBtnDiv").html();if(isProductTypeExist){$.each($("input:checkbox[id^='category-filter-']"),function(_,categoryElem){let elemVal=parseInt($(categoryElem).val());if($(categoryElem).is(":checked")&&$.inArray(elemVal,filteredPublicCategoryIds)<0){$(categoryElem).trigger("click");}else{$("input:checkbox[id='category-filter-"+elemVal+"']").css("display","none");$("label[for='category-filter-"+elemVal+"']").css("display","none");$("input:checkbox[id='category-filter-"+elemVal+"']").parent("li").css("display","none");}});if(filteredPublicCategoryIds.length>0){filteredPublicCategoryIds.forEach(function(categoryId){$("input:checkbox[id='category-filter-"+categoryId+"']").css("display","block");$("label[for='category-filter-"+categoryId+"']").css("display","block");$("input:checkbox[id='category-filter-"+categoryId+"']").parent("li").css("display","block");});}}
var url=window.location.href.split("#");var urlExtraPartData={"item_per_page":parseInt(item_per_page),"page":1,"public_category_ids":JSON.stringify([]),"public_category_id":public_category_id,"min_price":minimum_price,"max_price":maximum_price,"color_ids":JSON.stringify([]),"size_ids":JSON.stringify([]),"sort":"","change_event":""};function updateURLExtraPartData(key,value){if(value){urlExtraPartData[key]=value;}}
if(url[1]!=""&&url[1]!=undefined){try{var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));if(urlExtraPart["page"]){urlExtraPartData["page"]=parseInt(urlExtraPart["page"]);}
updateURLExtraPartData("public_category_ids",urlExtraPart["public_category_ids"]);updateURLExtraPartData("public_category_id",urlExtraPart["public_category_id"]);updateURLExtraPartData("min_price",urlExtraPart["min_price"]);updateURLExtraPartData("max_price",urlExtraPart["max_price"]);updateURLExtraPartData("color_ids",urlExtraPart["color_ids"]);updateURLExtraPartData("size_ids",urlExtraPart["size_ids"]);updateURLExtraPartData("sort",urlExtraPart["sort"]);updateURLExtraPartData("change_event",urlExtraPart["change_event"]);window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));$.each(JSON.parse(urlExtraPartData["public_category_ids"]),function(index,category_val){$("#category-filter-"+category_val).attr('checked',true);let cat_parent=$("#category-filter-"+category_val).attr("data-parent");if($("span#icon-category-filter-"+category_val)!=undefined){$("span#icon-category-filter-"+category_val).addClass("active");}
if($("ul#ul-category-filter-"+category_val)!=undefined){$("ul#ul-category-filter-"+category_val).show(300);}
if(cat_parent!=undefined&&cat_parent!=""){$("span#icon-category-filter-"+cat_parent).addClass("active");$("ul#ul-category-filter-"+cat_parent).show(300);}});$.each(JSON.parse(urlExtraPartData["color_ids"]),function(index,color_val){$("#color-filter-"+color_val).attr('checked',true);});$.each(JSON.parse(urlExtraPartData["size_ids"]),function(index,size_val){$("#size-filter-"+size_val).attr('checked',true);});}
catch(err){console.log(err);location.replace(location.origin+location.pathname);return;}
$('.price_range_left').val(urlExtraPartData["min_price"]);$('.price_range_right').val(urlExtraPartData["max_price"]);$('.slider').foundation('_reflow');$("input:radio[name='sort_by'][value='"+urlExtraPartData["sort"]+"']").attr('checked',true);}
var paramData={};paramData["reload"]=true;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData);$(document).on("click","#productListLoadMoreBtnDiv button",function(event){if($(this).hasClass('loading')){return;}
var url=window.location.href.split("#");urlExtraPartData["page"]=2;if(url[1]!=""&&url[1]!=undefined){var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));urlExtraPartData["page"]=parseInt(urlExtraPart["page"])+1;urlExtraPartData["public_category_ids"]=urlExtraPart["public_category_ids"];urlExtraPartData["public_category_id"]=urlExtraPart["public_category_id"];urlExtraPartData["min_price"]=urlExtraPart["min_price"];urlExtraPartData["max_price"]=urlExtraPart["max_price"];urlExtraPartData["color_ids"]=urlExtraPart["color_ids"];urlExtraPartData["size_ids"]=urlExtraPart["size_ids"];urlExtraPartData["sort"]=urlExtraPart["sort"];urlExtraPartData["change_event"]=urlExtraPart["change_event"];}
window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));var paramData={};paramData["reload"]=false;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData);});$(document).on("click","input:checkbox[id^='category-filter-']",function(event){$('html, body').animate({scrollTop:0});let elem_id=$(this).attr("id").replace("category-filter-","");let cat_children=$(this).attr("data-children");let cat_parent=$(this).attr("data-parent");if($(this).is(":checked")==true){if($("span#icon-category-filter-"+elem_id)!=undefined){$("span#icon-category-filter-"+elem_id).addClass("active");}
if($("ul#ul-category-filter-"+elem_id)!=undefined){$("ul#ul-category-filter-"+elem_id).show(300);}
if(cat_parent!=""&&cat_parent!=undefined){if($("#category-filter-"+cat_parent).is(':checked')){$("#category-filter-"+cat_parent).prop('checked',false);}}
if(cat_children!=""&&cat_children!=undefined){$.each(JSON.parse(cat_children),function(index,cat_id){$("#category-filter-"+cat_id).prop('checked',false);});}}else{if($("span#icon-category-filter-"+elem_id)!=undefined){$("span#icon-category-filter-"+elem_id).removeClass("active").removeClass("closed");}
if($("ul#ul-category-filter-"+elem_id)!=undefined){$("ul#ul-category-filter-"+elem_id).hide(300);}}
var url=window.location.href.split("#");var checkedFilterCategoryArray=Array();$.each($("input:checkbox[id^='category-filter-']:checked"),function(index,elem){checkedFilterCategoryArray.push(parseInt($(elem).val()));});urlExtraPartData["page"]=1;urlExtraPartData["public_category_ids"]=JSON.stringify(checkedFilterCategoryArray);urlExtraPartData["sort"]='';urlExtraPartData["change_event"]='category_filter';if(url[1]!=""&&url[1]!=undefined){var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));urlExtraPartData["public_category_id"]=urlExtraPart["public_category_id"];urlExtraPartData["min_price"]=urlExtraPart["min_price"];urlExtraPartData["max_price"]=urlExtraPart["max_price"];urlExtraPartData["color_ids"]=urlExtraPart["color_ids"];urlExtraPartData["size_ids"]=urlExtraPart["size_ids"];}
window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));var paramData={};paramData["reload"]=true;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData);});$(document).on("click","input:checkbox[id^='color-filter-']",function(event){$('html, body').animate({scrollTop:0});var url=window.location.href.split("#");var checkedFilterColorArray=Array();$.each($("input:checkbox[id^='color-filter-']:checked"),function(index,elem){checkedFilterColorArray.push(parseInt($(elem).val()));});urlExtraPartData["page"]=1;urlExtraPartData["color_ids"]=JSON.stringify(checkedFilterColorArray);urlExtraPartData["sort"]='';urlExtraPartData["change_event"]='color_filter';if(url[1]!=""&&url[1]!=undefined){var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));urlExtraPartData["public_category_ids"]=urlExtraPart["public_category_ids"];urlExtraPartData["public_category_id"]=urlExtraPart["public_category_id"];urlExtraPartData["min_price"]=urlExtraPart["min_price"];urlExtraPartData["max_price"]=urlExtraPart["max_price"];urlExtraPartData["size_ids"]=urlExtraPart["size_ids"];}
window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));var paramData={};paramData["reload"]=true;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData);});$(document).on("click","input:checkbox[id^='size-filter-']",function(event){$('html, body').animate({scrollTop:0});var url=window.location.href.split("#");var checkedFilterSizeArray=Array();$.each($("input:checkbox[id^='size-filter-']:checked"),function(index,elem){checkedFilterSizeArray.push(parseInt($(elem).val()));});urlExtraPartData["page"]=1;urlExtraPartData["size_ids"]=JSON.stringify(checkedFilterSizeArray);urlExtraPartData["sort"]='';urlExtraPartData["change_event"]='size_filter';if(url[1]!=""&&url[1]!=undefined){var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));urlExtraPartData["public_category_ids"]=urlExtraPart["public_category_ids"];urlExtraPartData["public_category_id"]=urlExtraPart["public_category_id"];urlExtraPartData["min_price"]=urlExtraPart["min_price"];urlExtraPartData["max_price"]=urlExtraPart["max_price"];urlExtraPartData["color_ids"]=urlExtraPart["color_ids"];}
window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));var paramData={};paramData["reload"]=true;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData);});$(document).on('change changed.zf.slider','#price-range',function(event){$('html, body').animate({scrollTop:0});var url=window.location.href.split("#");urlExtraPartData["min_price"]=parseInt($('.price_range_left').val());urlExtraPartData["max_price"]=parseInt($('.price_range_right').val());urlExtraPartData["page"]=1;urlExtraPartData["sort"]='';let priceChanged=false;if(url[1]!=""&&url[1]!=undefined){var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));urlExtraPartData["page"]=urlExtraPart["page"];urlExtraPartData["public_category_ids"]=urlExtraPart["public_category_ids"];urlExtraPartData["public_category_id"]=urlExtraPart["public_category_id"];urlExtraPartData["color_ids"]=urlExtraPart["color_ids"];urlExtraPartData["size_ids"]=urlExtraPart["size_ids"];if(urlExtraPartData["min_price"]!=urlExtraPart["min_price"]||urlExtraPartData["max_price"]!=urlExtraPart["max_price"]){priceChanged=true;urlExtraPartData["change_event"]='price_filter';}}
if(priceChanged){window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));var paramData={};paramData["reload"]=true;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData);}else{window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));}});$(document).on("change","input:radio[name='sort_by']",function(event){$('html, body').animate({scrollTop:0});var url=window.location.href.split("#");urlExtraPartData["sort"]=$(this).val();if(url[1]!=""&&url[1]!=undefined){var urlExtraPart=JSON.parse(decodeURIComponent(url[1]));urlExtraPartData["page"]=parseInt(urlExtraPart["page"]);urlExtraPartData["public_category_ids"]=urlExtraPart["public_category_ids"];urlExtraPartData["public_category_id"]=urlExtraPart["public_category_id"];urlExtraPartData["min_price"]=urlExtraPart["min_price"];urlExtraPartData["max_price"]=urlExtraPart["max_price"];urlExtraPartData["color_ids"]=urlExtraPart["color_ids"];urlExtraPartData["size_ids"]=urlExtraPart["size_ids"];urlExtraPartData["change_event"]=urlExtraPart["change_event"];}
window.location.replace(url[0]+"#"+JSON.stringify(urlExtraPartData));var paramData={};paramData["reload"]=true;paramData["page"]=urlExtraPartData["page"];paramData["item_per_page"]=urlExtraPartData["item_per_page"];paramData["public_category_ids"]=urlExtraPartData["public_category_ids"];paramData["public_category_id"]=urlExtraPartData["public_category_id"];paramData["min_price"]=urlExtraPartData["min_price"];paramData["max_price"]=urlExtraPartData["max_price"];paramData["color_ids"]=urlExtraPartData["color_ids"];paramData["size_ids"]=urlExtraPartData["size_ids"];paramData["sort"]=urlExtraPartData["sort"];paramData["change_event"]=urlExtraPartData["change_event"];loadProductContent(paramData,true);});$(document).on("click","#productListGoTopBtnDiv button",function(event){event.preventDefault();$('html, body').animate({scrollTop:0},500);});$(document).on("click","i[id^='filter-tag-close-']",function(event){event.preventDefault();let tagId=$(this).attr("id").replace("filter-tag-close-","");let tagtype=$(this).attr("data-tagtype");$("#filter-tag-"+tagId).remove();if(tagtype=='category'){$("input:checkbox[id='category-filter-"+tagId+"']").trigger("click");}else if(tagtype=='color'){$("input:checkbox[id='color-filter-"+tagId+"']").trigger("click");}else if(tagtype=='size'){$("input:checkbox[id='size-filter-"+tagId+"']").trigger("click");}});function create_timeout_opacity(time,opacity){setTimeout(function(){$('#product-placeholder-loader').css('opacity',opacity);},time);}
function show_products_placeholder_loading(){$('#product-item-container').hide();$('#product-placeholder-loader').show();}
function hide_products_placeholder_loading(){$('#product-placeholder-loader').hide();$('#product-item-container').show();}
function setFilterByTag(paramData){let categories=JSON.parse(paramData['public_category_ids']);let colors=JSON.parse(paramData['color_ids']);let sizes=JSON.parse(paramData['size_ids']);let filterTagsHtml="";$.each(categories,function(index,category){let categoryLabel=$('#category-filter-'+category).data('label');filterTagsHtml+='<span class="label secondary" id="filter-tag-'+category+'">'+categoryLabel+'<i class="icon-close" id="filter-tag-close-'+category+'" data-tagtype="category"></i></span>';});$.each(colors,function(index,color){let colorName=$("label[for='color-filter-"+color+"']").text();filterTagsHtml+='<span class="label secondary" id="filter-tag-'+color+'">'+colorName+'<i class="icon-close" id="filter-tag-close-'+color+'" data-tagtype="color"></i></span>';});$.each(sizes,function(index,size){let sizeName=$("label[for='size-filter-"+size+"']").text();filterTagsHtml+='<span class="label secondary" id="filter-tag-'+size+'">'+sizeName+'<i class="icon-close" id="filter-tag-close-'+size+'" data-tagtype="size"></i></span>';});$("#filtered-tag-div").html(filterTagsHtml);}
function loadProductContent(paramData,productSort=false){var reload=paramData["reload"]
if(paramData["reload"]){show_products_placeholder_loading();}
else{$(".load-more-btn span").text("Loading");$(".load-more-btn").addClass("loading").focus();$(".loader-container").css("display","block");$(".button-loader").addClass("activate");}
setFilterByTag(paramData);paramData['is_search_page']=isSearchPage;paramData['search_string']=searchString;$.ajax({type:"POST",url:products_list_ajax,data:paramData,dataType:'html',success:function(data,status){if(status=="success"){$("#load-more-container .button-loader").addClass("complete");if(reload){$("#load-more-container").remove();hide_products_placeholder_loading();$("#product_container_div").html(data);}else{setTimeout(function(){$("#load-more-container").remove();hide_products_placeholder_loading();$("#product_container_div").append(data);},500);}
setTimeout(function(){let ajax_loaded_product_count=$("#ajax_loaded_product_count").val()!=""&&$("#ajax_loaded_product_count").val()!=undefined?$("#ajax_loaded_product_count").val():0;let ajax_loaded_product_count_str=parseInt(ajax_loaded_product_count)>1?ajax_loaded_product_count+' Items':ajax_loaded_product_count+' Item';$("p#num-items").html(ajax_loaded_product_count_str);if((parseInt(paramData["page"])*parseInt(paramData["item_per_page"]))<parseInt(ajax_loaded_product_count)){$("#productListGoTopBtnDiv button").hide();$("#productListLoadMoreBtnDiv").html(loadBtnHtml);$("#productListLoadMoreBtnDiv button").css("visibility","visible");}else{$("#productListLoadMoreBtnDiv button").css("visibility","hidden");$("#productListLoadMoreBtnDiv").empty();$("#productListGoTopBtnDiv button").css("display","inline-block");if(parseInt(ajax_loaded_product_count)>=parseInt(paramData["item_per_page"])){$("#productListGoTopBtnDiv button").css("display","inline-block");}}
var loadedItemCountStr='';if(parseInt(ajax_loaded_product_count)>=parseInt(paramData["item_per_page"])){if((parseInt(paramData["page"])*parseInt(paramData["item_per_page"]))<=parseInt(ajax_loaded_product_count)){loadedItemCountStr+=(parseInt(paramData["page"])*parseInt(paramData["item_per_page"]))+" / "+ajax_loaded_product_count;}else{loadedItemCountStr+=ajax_loaded_product_count+" / "+ajax_loaded_product_count;}}else if(parseInt(ajax_loaded_product_count)==1){loadedItemCountStr=ajax_loaded_product_count+" Item";}else{loadedItemCountStr=ajax_loaded_product_count+" Items";}
if(parseInt(ajax_loaded_product_count)>0){$("#loadedItemsSpan").css("display","block");$("#loadedItemsSpan").html(loadedItemCountStr);}else{$("#loadedItemsSpan").css("display","none");}
let ajax_loaded_change_event=$("#ajax_loaded_change_event").val();let ajax_loaded_public_category_ids=$("#ajax_loaded_public_category_ids").val()!=undefined&&$("#ajax_loaded_public_category_ids").val()!=""?JSON.parse($("#ajax_loaded_public_category_ids").val()):[];let ajax_loaded_filtered_public_category_ids=$("#ajax_loaded_filtered_public_category_ids").val()!=undefined&&$("#ajax_loaded_filtered_public_category_ids").val()!=""?JSON.parse($("#ajax_loaded_filtered_public_category_ids").val()):[];let ajax_loaded_color_ids=$("#ajax_loaded_color_ids").val()!=undefined&&$("#ajax_loaded_color_ids").val()!=""?JSON.parse($("#ajax_loaded_color_ids").val()):[];let ajax_loaded_size_ids=$("#ajax_loaded_size_ids").val()!=undefined&&$("#ajax_loaded_size_ids").val()!=""?JSON.parse($("#ajax_loaded_size_ids").val()):[];$.each($("input:checkbox[id^='color-filter-']"),function(_,colorElem){let elemVal=parseInt($(colorElem).val());if($(colorElem).is(":checked")&&$.inArray(elemVal,ajax_loaded_color_ids)<0){$(colorElem).trigger("click");}else{$("input:checkbox[id='color-filter-"+elemVal+"']").css("display","none");$("label[for='color-filter-"+elemVal+"']").css("display","none");$("input:checkbox[id='color-filter-"+elemVal+"']").parent("li").css("display","none");}});if(ajax_loaded_color_ids.length>0){ajax_loaded_color_ids.forEach(function(colorId){$("input:checkbox[id='color-filter-"+colorId+"']").css("display","block");$("label[for='color-filter-"+colorId+"']").css("display","block");$("input:checkbox[id='color-filter-"+colorId+"']").parent("li").css("display","block");});}},500);}
else{$("#productListLoadMoreBtnDiv").html(loadBtnHtml);}},error:function(xhr,desc,err){$("#productListLoadMoreBtnDiv").html(loadBtnHtml);hide_products_placeholder_loading();console.log(err);},});}
$(document).on('click','.available-colors-block-list li',function(){if(!($(this).hasClass("active"))){$(this).parent().children("li.active").removeClass("active");$(this).addClass("active");$(this).parents(".product-card").children(".product-card-thumbnail").replaceWith($(this).find(".product-card-thumbnail").clone());$(this).parents(".product-card").children("#product-title").replaceWith($(this).find("#product-title").clone());$(this).parents(".product-card").children(".product-card-desc").replaceWith($(this).find(".product-card-desc").clone());}});});;