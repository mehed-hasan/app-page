jQuery.validator.addMethod("itiValidNumberLogin",function(value,element){return this.optional(element)||ITI_LOGIN.isValidNumber();},"Please enter a valid  Phone Number");jQuery(document).ready(function(e){var new_arrivals_url=$('#main-menu ul').first().find('li').first().find('a').attr('href');setTimeout(function(){var value=$('#login').val();if(value!==undefined&&value.includes('-')){$('#login').val(value.replace('-',''));}},1500);$(document).on('change','#login',function(){var value=$(this).val();if(value.includes('-')){$(this).val(value.replace('-',''));}});$("#login-form").validate({rules:{login:{required:true,itiValidNumberLogin:true,},passkey:{required:true,minlength:8}},submitHandler:function(form){var login=ITI_LOGIN.getNumber().replace('+','');var passkey=$('#passkey').val();if(login&&passkey){start_full_loader();$.ajax({type:"POST",url:$('#login-form').data('login-url'),data:{'phone_no':login,'password':passkey,'country_iso2_code':ITI_LOGIN.getSelectedCountryData().iso2,},dataType:'json',success:function(data,status){stop_full_loader();if(data.status){$("#response-text-wrp h6").css("color","green").html("You have successfully login!");$("#response-text-wrp").next().show();if(new_arrivals_url==undefined){new_arrivals_url=""}
location.replace(location.origin+new_arrivals_url);}else{if(data.errorType=="ivalid_login"){$("#response-text-wrp h6").css("color","red").html("Record not found. Please <a style='color: red;text-transform: none;font-weight: bold;' href="+$('#login-form').data('sign-up-url')+">SIGN UP</a> first.");}else if(data.errorType=="ivalid_password"||data.errorType=="password_not_set"){$("#response-text-wrp h6").css("color","red").html("Password does not match. If you forgot your password please try <a style='color: red;text-transform: none;font-weight: bold;' href="+$('#login-form').data('forgot-url')+">Recover Password</a>");}else if(data.errorType=="server_error"){$("#response-text-wrp h6").css("color","red").html("Something went wrong. Please try again.");}}
$("#response-text-wrp").show().next().show();},error:function(xhr,desc,err){stop_full_loader();}});}},unhighlight:function(element,errorClass,validClass){$(element).next('label.error').remove();},errorPlacement:function(error,element){element.after(error);}});});;